<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>go-interface | l0calh0st</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">go-interface</h1><a id="logo" href="/.">l0calh0st</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">go-interface</h1><div class="post-meta">2021-03-27</div><div class="post-content"><h4 id="0x00-相关概念"><a href="#0x00-相关概念" class="headerlink" title="0x00 相关概念"></a>0x00 相关概念</h4><p>&emsp;在go语言里面<code>interface</code>用于定义一组行为，一个具体的类型只要实现了这一组行为，那么就可以称这个具体的类型实现了这个接口。下面是interface结构体</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> interfacetype <span class="keyword">struct</span> &#123;</span><br><span class="line">	typ     _type    		<span class="comment">// 通用底层数据结构，任何一个类型的底层实现，都基于_type这一数据结构来实现</span></span><br><span class="line">	pkgpath name      		<span class="comment">// 这是一个指向typename结构的地址</span></span><br><span class="line">	mhdr    []imethod       <span class="comment">// 这个里面就是interface所定义的方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>imethod结构体定义如下:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> imethod <span class="keyword">struct</span> &#123;</span><br><span class="line">	name nameOff 		<span class="comment">// int32类型，相对于firstmoduledata.type的偏移量，计算后的地址指向一个type name结构体</span></span><br><span class="line">	ityp typeOff        <span class="comment">// int32类型，相对于firstmoduledata.type的偏移量，方法声明的信息，计算后执行一个func type结构体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>&emsp;在go语言里面interface和其他类型之间的映射关系是通过interface映射表来实现的(itab)(有点类似C++里面的vtab), itab的结构体如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> itab <span class="keyword">struct</span> &#123;</span><br><span class="line">	inter *interfacetype   			<span class="comment">//  指向一个interface类型的定义</span></span><br><span class="line">	_type *_type  					<span class="comment">// 指向一个普通数据类型，另外这个普通类型_type 还需要实现上inter接口所有的方法</span></span><br><span class="line">	hash  <span class="keyword">uint32</span> <span class="comment">// copy of _type.hash. Used for type switches.</span></span><br><span class="line">	_     [<span class="number">4</span>]<span class="keyword">byte</span></span><br><span class="line">	<span class="comment">// fun 指向一组方法，	指向的上具体类型_type(上面第二个字段)的方法</span></span><br><span class="line">	<span class="comment">// 这个指针数组是可以变化的，编译器负责填充，在下面的例子我们将会看到这一点</span></span><br><span class="line">	fun   [<span class="number">1</span>]<span class="keyword">uintptr</span> <span class="comment">// variable sized. fun[0]==0 means _type does not implement inter.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="0x01-接口调用过程分析"><a href="#0x01-接口调用过程分析" class="headerlink" title="0x01 接口调用过程分析"></a>0x01 接口调用过程分析</h4><p>&emsp;一段简单的demo代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> I <span class="keyword">interface</span>&#123;</span><br><span class="line">	DoSomeWork()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> T <span class="keyword">struct</span>&#123;</span><br><span class="line">	a <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span><span class="params">(t *T)</span><span class="title">DoSomeWork</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	t := &amp;T&#123;&#125;</span><br><span class="line">	i := I(t)</span><br><span class="line">	<span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>生成AST语法树如下:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line">before (*T).DoSomeWork</span><br><span class="line">after walk (*T).DoSomeWork</span><br><span class="line"></span><br><span class="line">before main</span><br><span class="line">.   DCL l(<span class="number">17</span>)</span><br><span class="line">.   .   NAME-main.t u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">1</span>) l(<span class="number">17</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) f(<span class="number">1</span>) ld(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line"></span><br><span class="line">.   AS l(<span class="number">17</span>) colas(<span class="number">1</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   NAME-main.t u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">1</span>) l(<span class="number">17</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) f(<span class="number">1</span>) ld(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line">.   .   PTRLIT l(<span class="number">17</span>) esc(no) ld(<span class="number">1</span>) tc(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line">.   .   .   STRUCTLIT l(<span class="number">17</span>) tc(<span class="number">1</span>) main.T</span><br><span class="line">.   .   .   .   TYPE &lt;S&gt; l(<span class="number">17</span>) tc(<span class="number">1</span>) implicit(<span class="number">1</span>) <span class="keyword">type</span>=PTR64-*main.T PTR64-*main.T</span><br><span class="line"></span><br><span class="line">.   DCL l(<span class="number">18</span>)</span><br><span class="line">.   .   NAME-main.i u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">2</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) f(<span class="number">1</span>) ld(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) main.I</span><br><span class="line"></span><br><span class="line">.   AS l(<span class="number">18</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   NAME-main.autotmp_0000 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line">.   .   NAME-main.t u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">1</span>) l(<span class="number">17</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) f(<span class="number">1</span>) ld(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line"></span><br><span class="line">.   AS l(<span class="number">18</span>) colas(<span class="number">1</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   NAME-main.i u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">2</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) f(<span class="number">1</span>) ld(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) main.I</span><br><span class="line">.   .   CONVIFACE l(<span class="number">18</span>) tc(<span class="number">1</span>) main.I</span><br><span class="line">.   .   .   NAME-main.autotmp_0000 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line"></span><br><span class="line">.   VARKILL l(<span class="number">18</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   NAME-main.autotmp_0000 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line"></span><br><span class="line">.   PRINT l(<span class="number">19</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   PRINT-list</span><br><span class="line">.   .   NAME-main.i u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">2</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) f(<span class="number">1</span>) ld(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) main.I</span><br><span class="line">after walk main</span><br><span class="line">.   DCL l(<span class="number">17</span>)</span><br><span class="line">.   .   NAME-main.t u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">1</span>) l(<span class="number">17</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) f(<span class="number">1</span>) ld(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line"></span><br><span class="line">.   AS-init</span><br><span class="line">.   .   AS l(<span class="number">17</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   .   NAME-main.autotmp_0002 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">17</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) main.T</span><br><span class="line"></span><br><span class="line">.   .   AS l(<span class="number">17</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   .   NAME-main.autotmp_0001 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">17</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line">.   .   .   ADDR u(<span class="number">2</span>) l(<span class="number">17</span>) tc(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line">.   .   .   .   NAME-main.autotmp_0002 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">17</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) main.T</span><br><span class="line"></span><br><span class="line">.   .   AS u(<span class="number">2</span>) l(<span class="number">17</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   .   IND u(<span class="number">2</span>) l(<span class="number">17</span>) tc(<span class="number">1</span>) main.T</span><br><span class="line">.   .   .   .   NAME-main.autotmp_0001 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">17</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line">.   AS u(<span class="number">100</span>) l(<span class="number">17</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   NAME-main.t u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">1</span>) l(<span class="number">17</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) f(<span class="number">1</span>) ld(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line">.   .   NAME-main.autotmp_0001 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">17</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line"></span><br><span class="line">.   DCL l(<span class="number">18</span>)</span><br><span class="line">.   .   NAME-main.i u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">2</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) f(<span class="number">1</span>) ld(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) main.I</span><br><span class="line"></span><br><span class="line">.   AS u(<span class="number">2</span>) l(<span class="number">18</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   NAME-main.autotmp_0000 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line">.   .   NAME-main.t u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">1</span>) l(<span class="number">17</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) f(<span class="number">1</span>) ld(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line"></span><br><span class="line">.   AS-init</span><br><span class="line">.   .   AS l(<span class="number">18</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   .   NAME-main.autotmp_0003 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*<span class="keyword">uint8</span></span><br><span class="line">.   .   .   NAME-<span class="keyword">go</span>.itab.*<span class="string">&quot;&quot;</span>.T.<span class="string">&quot;&quot;</span>.I u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PEXTERN) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*<span class="keyword">uint8</span></span><br><span class="line"></span><br><span class="line">.   .   IF l(<span class="number">18</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   IF-test</span><br><span class="line">.   .   .   EQ l(<span class="number">18</span>) tc(<span class="number">1</span>) <span class="keyword">bool</span></span><br><span class="line">.   .   .   .   NAME-main.autotmp_0003 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*<span class="keyword">uint8</span></span><br><span class="line">.   .   .   .   LITERAL-<span class="literal">nil</span> u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) tc(<span class="number">1</span>) PTR64-*<span class="keyword">uint8</span></span><br><span class="line">.   .   IF-body</span><br><span class="line">.   .   .   AS l(<span class="number">18</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   .   .   NAME-main.autotmp_0003 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*<span class="keyword">uint8</span></span><br><span class="line">.   .   .   .   CALLFUNC u(<span class="number">100</span>) l(<span class="number">18</span>) tc(<span class="number">1</span>) PTR64-*<span class="keyword">byte</span></span><br><span class="line">.   .   .   .   .   NAME-runtime.typ2Itab u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">2</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PFUNC) tc(<span class="number">1</span>) used(<span class="number">1</span>) FUNC-funcSTRUCT-(FIELD-</span><br><span class="line">.   .   .   .   .   .   NAME-runtime.typ·<span class="number">2</span> u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">2</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PPARAM) f(<span class="number">1</span>) PTR64-*<span class="keyword">byte</span> PTR64-*<span class="keyword">byte</span>, FIELD-</span><br><span class="line">.   .   .   .   .   .   NAME-runtime.typ2·<span class="number">3</span> u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">2</span>) x(<span class="number">8</span>+<span class="number">0</span>) class(PPARAM) f(<span class="number">1</span>) PTR64-*<span class="keyword">byte</span> PTR64-*<span class="keyword">byte</span>, FIELD-</span><br><span class="line">.   .   .   .   .   .   NAME-runtime.cache·<span class="number">4</span> u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">2</span>) x(<span class="number">16</span>+<span class="number">0</span>) class(PPARAM) f(<span class="number">1</span>) PTR64-*PTR64-*<span class="keyword">byte</span> PTR64-*PTR64-*<span class="keyword">byte</span>) PTR64-*<span class="keyword">byte</span></span><br><span class="line">.   .   .   .   CALLFUNC-list</span><br><span class="line">.   .   .   .   .   AS u(<span class="number">2</span>) l(<span class="number">18</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   .   .   .   .   INDREG-SP a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) tc(<span class="number">1</span>) runtime.typ·<span class="number">2</span> G0 PTR64-*<span class="keyword">byte</span></span><br><span class="line">.   .   .   .   .   .   ADDR u(<span class="number">2</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) tc(<span class="number">1</span>) PTR64-*<span class="keyword">uint8</span></span><br><span class="line">.   .   .   .   .   .   .   NAME-<span class="keyword">type</span>.*<span class="string">&quot;&quot;</span>.T u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">11</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PEXTERN) tc(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line"></span><br><span class="line">.   .   .   .   .   AS u(<span class="number">2</span>) l(<span class="number">18</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   .   .   .   .   INDREG-SP a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">8</span>+<span class="number">0</span>) tc(<span class="number">1</span>) runtime.typ2·<span class="number">3</span> G0 PTR64-*<span class="keyword">byte</span></span><br><span class="line">.   .   .   .   .   .   ADDR u(<span class="number">2</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) tc(<span class="number">1</span>) PTR64-*<span class="keyword">uint8</span></span><br><span class="line">.   .   .   .   .   .   .   NAME-<span class="keyword">type</span>.<span class="string">&quot;&quot;</span>.I u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PEXTERN) tc(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line"></span><br><span class="line">.   .   .   .   .   AS u(<span class="number">2</span>) l(<span class="number">18</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   .   .   .   .   INDREG-SP a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">16</span>+<span class="number">0</span>) tc(<span class="number">1</span>) runtime.cache·<span class="number">4</span> G0 PTR64-*PTR64-*<span class="keyword">byte</span></span><br><span class="line">.   .   .   .   .   .   ADDR u(<span class="number">2</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) tc(<span class="number">1</span>) PTR64-*PTR64-*<span class="keyword">uint8</span></span><br><span class="line">.   .   .   .   .   .   .   NAME-<span class="keyword">go</span>.itab.*<span class="string">&quot;&quot;</span>.T.<span class="string">&quot;&quot;</span>.I u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PEXTERN) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*<span class="keyword">uint8</span></span><br><span class="line">.   AS u(<span class="number">100</span>) l(<span class="number">18</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   NAME-main.i u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">2</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) f(<span class="number">1</span>) ld(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) main.I</span><br><span class="line">.   .   EFACE u(<span class="number">2</span>) l(<span class="number">18</span>) tc(<span class="number">1</span>) main.I</span><br><span class="line">.   .   .   NAME-main.autotmp_0003 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*<span class="keyword">uint8</span></span><br><span class="line">.   .   .   NAME-main.autotmp_0000 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line"></span><br><span class="line">.   VARKILL l(<span class="number">18</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   NAME-main.autotmp_0000 u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) esc(N) tc(<span class="number">1</span>) used(<span class="number">1</span>) PTR64-*main.T</span><br><span class="line"></span><br><span class="line">.   EMPTY-init</span><br><span class="line">.   .   CALLFUNC u(<span class="number">100</span>) l(<span class="number">19</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   .   NAME-runtime.printiface u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">2</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PFUNC) tc(<span class="number">1</span>) used(<span class="number">1</span>) FUNC-funcSTRUCT-(FIELD-main.I)</span><br><span class="line">.   .   CALLFUNC-list</span><br><span class="line">.   .   .   AS u(<span class="number">1</span>) l(<span class="number">19</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   .   .   INDREG-SP a(<span class="number">1</span>) l(<span class="number">19</span>) x(<span class="number">0</span>+<span class="number">0</span>) tc(<span class="number">1</span>) main.I</span><br><span class="line">.   .   .   .   NAME-main.i u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">2</span>) l(<span class="number">18</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PAUTO) f(<span class="number">1</span>) ld(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) main.I</span><br><span class="line">.   EMPTY u(<span class="number">100</span>) l(<span class="number">19</span>) tc(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">before init</span><br><span class="line">.   IF l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   IF-test</span><br><span class="line">.   .   NE l(<span class="number">20</span>) tc(<span class="number">1</span>) <span class="keyword">bool</span></span><br><span class="line">.   .   .   NAME-main.initdone· u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PEXTERN) tc(<span class="number">1</span>) used(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line">.   .   .   LITERAL<span class="number">-0</span> u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line">.   IF-body</span><br><span class="line">.   .   IF l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   IF-test</span><br><span class="line">.   .   .   EQ l(<span class="number">20</span>) tc(<span class="number">1</span>) <span class="keyword">bool</span></span><br><span class="line">.   .   .   .   NAME-main.initdone· u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PEXTERN) tc(<span class="number">1</span>) used(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line">.   .   .   .   LITERAL<span class="number">-2</span> u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line">.   .   IF-body</span><br><span class="line">.   .   .   RETURN l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">.   .   CALLFUNC l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   .   NAME-runtime.throwinit u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">2</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PFUNC) tc(<span class="number">1</span>) used(<span class="number">1</span>) FUNC-funcSTRUCT-()</span><br><span class="line"></span><br><span class="line">.   AS l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   NAME-main.initdone· u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PEXTERN) tc(<span class="number">1</span>) used(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line">.   .   LITERAL<span class="number">-1</span> u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line"></span><br><span class="line">.   AS l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   NAME-main.initdone· u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PEXTERN) tc(<span class="number">1</span>) used(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line">.   .   LITERAL<span class="number">-2</span> u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line"></span><br><span class="line">.   RETURN l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line">after walk init</span><br><span class="line">.   IF l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   IF-test</span><br><span class="line">.   .   NE u(<span class="number">2</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>) <span class="keyword">bool</span></span><br><span class="line">.   .   .   NAME-main.initdone· u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PEXTERN) tc(<span class="number">1</span>) used(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line">.   .   .   LITERAL<span class="number">-0</span> u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line">.   IF-body</span><br><span class="line">.   .   IF l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   IF-test</span><br><span class="line">.   .   .   EQ u(<span class="number">2</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>) <span class="keyword">bool</span></span><br><span class="line">.   .   .   .   NAME-main.initdone· u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PEXTERN) tc(<span class="number">1</span>) used(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line">.   .   .   .   LITERAL<span class="number">-2</span> u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line">.   .   IF-body</span><br><span class="line">.   .   .   RETURN l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">.   .   CALLFUNC u(<span class="number">100</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   .   NAME-runtime.throwinit u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">2</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PFUNC) tc(<span class="number">1</span>) used(<span class="number">1</span>) FUNC-funcSTRUCT-()</span><br><span class="line"></span><br><span class="line">.   AS u(<span class="number">2</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   NAME-main.initdone· u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PEXTERN) tc(<span class="number">1</span>) used(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line">.   .   LITERAL<span class="number">-1</span> u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line"></span><br><span class="line">.   AS u(<span class="number">2</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   NAME-main.initdone· u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PEXTERN) tc(<span class="number">1</span>) used(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line">.   .   LITERAL<span class="number">-2</span> u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">20</span>) tc(<span class="number">1</span>) <span class="keyword">uint8</span></span><br><span class="line"></span><br><span class="line">.   RETURN l(<span class="number">20</span>) tc(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">before I.DoSomeWork</span><br><span class="line">.   CALLINTER l(<span class="number">22</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   DOTINTER l(<span class="number">22</span>) x(<span class="number">0</span>+<span class="number">0</span>) tc(<span class="number">1</span>) FUNC-methodSTRUCT-(FIELD-PTR64-*STRUCT-<span class="keyword">struct</span> &#123;&#125;) funcSTRUCT-()</span><br><span class="line">.   .   .   NAME-main..this u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">1</span>) l(<span class="number">22</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PPARAM) f(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) main.I</span><br><span class="line">.   .   .   NAME-main.DoSomeWork u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">22</span>) x(<span class="number">0</span>+<span class="number">0</span>)</span><br><span class="line">after walk I.DoSomeWork</span><br><span class="line">.   CALLINTER u(<span class="number">100</span>) l(<span class="number">22</span>) tc(<span class="number">1</span>)</span><br><span class="line">.   .   DOTINTER u(<span class="number">2</span>) l(<span class="number">22</span>) x(<span class="number">0</span>+<span class="number">0</span>) tc(<span class="number">1</span>) FUNC-methodSTRUCT-(FIELD-PTR64-*STRUCT-<span class="keyword">struct</span> &#123;&#125;) funcSTRUCT-()</span><br><span class="line">.   .   .   NAME-main..this u(<span class="number">1</span>) a(<span class="number">1</span>) g(<span class="number">1</span>) l(<span class="number">22</span>) x(<span class="number">0</span>+<span class="number">0</span>) class(PPARAM) f(<span class="number">1</span>) tc(<span class="number">1</span>) used(<span class="number">1</span>) main.I</span><br><span class="line">.   .   .   NAME-main.DoSomeWork u(<span class="number">1</span>) a(<span class="number">1</span>) l(<span class="number">22</span>) x(<span class="number">0</span>+<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>before main节点树<br>先看分析下第一节点<code>DCL</code>第二个节点<code>AS</code>两个节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DCL l(17)</span><br><span class="line">.   .   NAME-main.t u(1) a(1) g(1) l(17) x(0+0) class(PAUTO) f(1) ld(1) tc(1) used(1) PTR64-*main.T</span><br><span class="line"></span><br><span class="line">.   AS l(17) colas(1) tc(1)</span><br><span class="line">.   .   NAME-main.t u(1) a(1) g(1) l(17) x(0+0) class(PAUTO) f(1) ld(1) tc(1) used(1) PTR64-*main.T</span><br><span class="line">.   .   PTRLIT l(17) esc(no) ld(1) tc(1) PTR64-*main.T</span><br><span class="line">.   .   .   STRUCTLIT l(17) tc(1) main.T</span><br><span class="line">.   .   .   .   TYPE &lt;S&gt; l(17) tc(1) implicit(1) type&#x3D;PTR64-*main.T PTR64-*main.T</span><br></pre></td></tr></table></figure>

<p>第一个节点<code>DCL</code> 声明了一个变量<code>main.t</code>，变量类型是一个64位指向main.T的指针，<br>第二个节点<code>AS</code> 节点将一个main.T实力的指针赋值给main.T<br>这两段的伪代码如下:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> main.t *main.T</span><br><span class="line">main.t = &amp;main.T&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>接着看下第三节点<code>DCL</code>和第四第五个<code>AS</code>节点：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.   DCL l(18)</span><br><span class="line">.   .   NAME-main.i u(1) a(1) g(2) l(18) x(0+0) class(PAUTO) f(1) ld(1) tc(1) used(1) main.I</span><br><span class="line"></span><br><span class="line">.   AS l(18) tc(1)</span><br><span class="line">.   .   NAME-main.autotmp_0000 u(1) a(1) l(18) x(0+0) class(PAUTO) esc(N) tc(1) used(1) PTR64-*main.T</span><br><span class="line">.   .   NAME-main.t u(1) a(1) g(1) l(17) x(0+0) class(PAUTO) f(1) ld(1) tc(1) used(1) PTR64-*main.T</span><br><span class="line"></span><br><span class="line">.   AS l(18) colas(1) tc(1)</span><br><span class="line">.   .   NAME-main.i u(1) a(1) g(2) l(18) x(0+0) class(PAUTO) f(1) ld(1) tc(1) used(1) main.I</span><br><span class="line">.   .   CONVIFACE l(18) tc(1) main.I</span><br><span class="line">.   .   .   NAME-main.autotmp_0000 u(1) a(1) l(18) x(0+0) class(PAUTO) esc(N) tc(1) used(1) PTR64-*main.T</span><br></pre></td></tr></table></figure>

<p>第三个节点<code>DCL</code>声明了一个变量<code>main.i</code>, 类型是<code>main.I</code><br>第四个节点<code>AS</code>节点创建一个临时对象<code>main.autotmp_000</code>，类型是<code>*main.T</code>, 并把<code>main.t</code> 赋值给<code>main.autotmp_000</code><br>第五个节点<code>AS</code>节点，创建一个特殊的节点<code>CONVIFACE</code>,并且把这个节点赋值给<code>main.i</code><br>这三个节点伪代码如下:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> main.i main.I</span><br><span class="line"><span class="keyword">var</span> main.autotmp_000 = main.t</span><br><span class="line">main.i = CONVIFACE(main.autotmp_000)</span><br></pre></td></tr></table></figure>

<p>看下编译器处理后的第二个版本的节点树</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"> AS-init</span><br><span class="line">.   .   AS l(18) tc(1)</span><br><span class="line">.   .   .   NAME-main.autotmp_0003 u(1) a(1) l(18) x(0+0) class(PAUTO) esc(N) tc(1) used(1) PTR64-*uint8</span><br><span class="line">.   .   .   NAME-go.itab.*&quot;&quot;.T.&quot;&quot;.I u(1) a(1) l(18) x(0+0) class(PEXTERN) tc(1) used(1) PTR64-*uint8</span><br><span class="line"></span><br><span class="line">.   .   IF l(18) tc(1)</span><br><span class="line">.   .   IF-test</span><br><span class="line">.   .   .   EQ l(18) tc(1) bool</span><br><span class="line">.   .   .   .   NAME-main.autotmp_0003 u(1) a(1) l(18) x(0+0) class(PAUTO) esc(N) tc(1) used(1) PTR64-*uint8</span><br><span class="line">.   .   .   .   LITERAL-nil u(1) a(1) l(18) tc(1) PTR64-*uint8</span><br><span class="line">.   .   IF-body</span><br><span class="line">.   .   .   AS l(18) tc(1)</span><br><span class="line">.   .   .   .   NAME-main.autotmp_0003 u(1) a(1) l(18) x(0+0) class(PAUTO) esc(N) tc(1) used(1) PTR64-*uint8</span><br><span class="line">.   .   .   .   CALLFUNC u(100) l(18) tc(1) PTR64-*byte</span><br><span class="line">.   .   .   .   .   NAME-runtime.typ2Itab u(1) a(1) l(2) x(0+0) class(PFUNC) tc(1) used(1) FUNC-funcSTRUCT-(FIELD-</span><br><span class="line">.   .   .   .   .   .   NAME-runtime.typ·2 u(1) a(1) l(2) x(0+0) class(PPARAM) f(1) PTR64-*byte PTR64-*byte, FIELD-</span><br><span class="line">.   .   .   .   .   .   NAME-runtime.typ2·3 u(1) a(1) l(2) x(8+0) class(PPARAM) f(1) PTR64-*byte PTR64-*byte, FIELD-</span><br><span class="line">.   .   .   .   .   .   NAME-runtime.cache·4 u(1) a(1) l(2) x(16+0) class(PPARAM) f(1) PTR64-*PTR64-*byte PTR64-*PTR64-*byte) PTR64-*byte</span><br><span class="line">.   .   .   .   CALLFUNC-list</span><br><span class="line">.   .   .   .   .   AS u(2) l(18) tc(1)</span><br><span class="line">.   .   .   .   .   .   INDREG-SP a(1) l(18) x(0+0) tc(1) runtime.typ·2 G0 PTR64-*byte</span><br><span class="line">.   .   .   .   .   .   ADDR u(2) a(1) l(18) tc(1) PTR64-*uint8</span><br><span class="line">.   .   .   .   .   .   .   NAME-type.*&quot;&quot;.T u(1) a(1) l(11) x(0+0) class(PEXTERN) tc(1) uint8</span><br><span class="line"></span><br><span class="line">.   .   .   .   .   AS u(2) l(18) tc(1)</span><br><span class="line">.   .   .   .   .   .   INDREG-SP a(1) l(18) x(8+0) tc(1) runtime.typ2·3 G0 PTR64-*byte</span><br><span class="line">.   .   .   .   .   .   ADDR u(2) a(1) l(18) tc(1) PTR64-*uint8</span><br><span class="line">.   .   .   .   .   .   .   NAME-type.&quot;&quot;.I u(1) a(1) l(18) x(0+0) class(PEXTERN) tc(1) uint8</span><br><span class="line"></span><br><span class="line">.   .   .   .   .   AS u(2) l(18) tc(1)</span><br><span class="line">.   .   .   .   .   .   INDREG-SP a(1) l(18) x(16+0) tc(1) runtime.cache·4 G0 PTR64-*PTR64-*byte</span><br><span class="line">.   .   .   .   .   .   ADDR u(2) a(1) l(18) tc(1) PTR64-*PTR64-*uint8</span><br><span class="line">.   .   .   .   .   .   .   NAME-go.itab.*&quot;&quot;.T.&quot;&quot;.I u(1) a(1) l(18) x(0+0) class(PEXTERN) tc(1) used(1) PTR64-*uint8</span><br><span class="line">.   AS u(100) l(18) tc(1)</span><br><span class="line">.   .   NAME-main.i u(1) a(1) g(2) l(18) x(0+0) class(PAUTO) f(1) ld(1) tc(1) used(1) main.I</span><br><span class="line">.   .   EFACE u(2) l(18) tc(1) main.I</span><br><span class="line">.   .   .   NAME-main.autotmp_0003 u(1) a(1) l(18) x(0+0) class(PAUTO) esc(N) tc(1) used(1) PTR64-*uint8</span><br><span class="line">.   .   .   NAME-main.autotmp_0000 u(1) a(1) l(18) x(0+0) class(PAUTO) esc(N) tc(1) used(1) PTR64-*main.T</span><br></pre></td></tr></table></figure>

<p>在<code>AS-init</code>节点里面主要干了以下事情：临时创建一个对象<code>main.autotmp_0003</code>，并且把<code>go.itab.*&quot;&quot;.T.&quot;&quot;.I</code>赋值给<code>main.autotmp_0003</code>, 然后判断这个对象是否为空，如果为空则调用<code>runtime.typ2Itab</code>方法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">typ2Itab</span><span class="params">(t *_type, inter *interfacetype, cache **itab)</span> *<span class="title">itab</span></span> &#123;</span><br><span class="line">	tab := getitab(inter, t, <span class="literal">false</span>)</span><br><span class="line">	atomicstorep(unsafe.Pointer(cache), unsafe.Pointer(tab))</span><br><span class="line">	<span class="keyword">return</span> tab</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>真正工作的函数是getitab(inter, t, false)方法<br>getitab函数如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getitab</span><span class="params">(inter *interfacetype, typ *_type, canfail <span class="keyword">bool</span>)</span> *<span class="title">itab</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(inter.mhdr) == <span class="number">0</span> &#123;</span><br><span class="line">		gothrow(<span class="string">&quot;internal error - misuse of itab&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// easy case</span></span><br><span class="line">	x := typ.x</span><br><span class="line">	<span class="keyword">if</span> x == <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> canfail &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">		&#125;</span><br><span class="line">		i := (*imethod)(add(unsafe.Pointer(inter), unsafe.Sizeof(interfacetype&#123;&#125;)))</span><br><span class="line">		<span class="built_in">panic</span>(&amp;TypeAssertionError&#123;<span class="string">&quot;&quot;</span>, *typ._string, *inter.typ._string, *i.name&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// compiler has provided some good hash codes for us.</span></span><br><span class="line">	h := inter.typ.hash</span><br><span class="line">	h += <span class="number">17</span> * typ.hash</span><br><span class="line">	<span class="comment">// TODO(rsc): h += 23 * x.mhash ?</span></span><br><span class="line">	h %= hashSize</span><br><span class="line"></span><br><span class="line">	<span class="comment">// look twice - once without lock, once with.</span></span><br><span class="line">	<span class="comment">// common case will be no lock contention.</span></span><br><span class="line">	<span class="keyword">var</span> m *itab</span><br><span class="line">	<span class="keyword">var</span> locked <span class="keyword">int</span></span><br><span class="line">	<span class="keyword">for</span> locked = <span class="number">0</span>; locked &lt; <span class="number">2</span>; locked++ &#123;</span><br><span class="line">		<span class="keyword">if</span> locked != <span class="number">0</span> &#123;</span><br><span class="line">			lock(&amp;ifaceLock)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> m = (*itab)(atomicloadp(unsafe.Pointer(&amp;hash[h]))); m != <span class="literal">nil</span>; m = m.link &#123;</span><br><span class="line">			<span class="keyword">if</span> m.inter == inter &amp;&amp; m._type == typ &#123;</span><br><span class="line">				<span class="keyword">if</span> m.bad != <span class="number">0</span> &#123;</span><br><span class="line">					m = <span class="literal">nil</span></span><br><span class="line">					<span class="keyword">if</span> !canfail &#123;</span><br><span class="line">						<span class="comment">// this can only happen if the conversion</span></span><br><span class="line">						<span class="comment">// was already done once using the , ok form</span></span><br><span class="line">						<span class="comment">// and we have a cached negative result.</span></span><br><span class="line">						<span class="comment">// the cached result doesn&#x27;t record which</span></span><br><span class="line">						<span class="comment">// interface function was missing, so jump</span></span><br><span class="line">						<span class="comment">// down to the interface check, which will</span></span><br><span class="line">						<span class="comment">// do more work but give a better error.</span></span><br><span class="line">						<span class="keyword">goto</span> search</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> locked != <span class="number">0</span> &#123;</span><br><span class="line">					unlock(&amp;ifaceLock)</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> m</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 上面我们提过itab.fun这个指针数组的大小是动态</span></span><br><span class="line">	m = (*itab)(persistentalloc(unsafe.Sizeof(itab&#123;&#125;)+<span class="keyword">uintptr</span>(<span class="built_in">len</span>(inter.mhdr))*ptrSize, <span class="number">0</span>, &amp;memstats.other_sys))</span><br><span class="line">	m.inter = inter</span><br><span class="line">	m._type = typ</span><br><span class="line"></span><br><span class="line">search:</span><br><span class="line">	<span class="comment">// both inter and typ have method sorted by name,</span></span><br><span class="line">	<span class="comment">// and interface names are unique,</span></span><br><span class="line">	<span class="comment">// so can iterate over both in lock step;</span></span><br><span class="line">	<span class="comment">// the loop is O(ni+nt) not O(ni*nt).</span></span><br><span class="line">	ni := <span class="built_in">len</span>(inter.mhdr)</span><br><span class="line">	nt := <span class="built_in">len</span>(x.mhdr)</span><br><span class="line">	j := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> k := <span class="number">0</span>; k &lt; ni; k++ &#123;</span><br><span class="line">		<span class="comment">// 这里面有两层循环，目的是遍历interface定义的所有的方法</span></span><br><span class="line">		<span class="comment">// 在遍历具体类型所定义的方法</span></span><br><span class="line">		<span class="comment">// 如果匹配到，则把它放到interface的mhdr里面。</span></span><br><span class="line">		i := (*imethod)(add(unsafe.Pointer(inter), unsafe.Sizeof(interfacetype&#123;&#125;)+<span class="keyword">uintptr</span>(k)*unsafe.Sizeof(imethod&#123;&#125;)))</span><br><span class="line">		iname := i.name</span><br><span class="line">		ipkgpath := i.pkgpath</span><br><span class="line">		itype := i._type</span><br><span class="line">		<span class="keyword">for</span> ; j &lt; nt; j++ &#123;</span><br><span class="line">			t := (*method)(add(unsafe.Pointer(x), unsafe.Sizeof(uncommontype&#123;&#125;)+<span class="keyword">uintptr</span>(j)*unsafe.Sizeof(method&#123;&#125;)))</span><br><span class="line">			<span class="keyword">if</span> t.mtyp == itype &amp;&amp; t.name == iname &amp;&amp; t.pkgpath == ipkgpath &#123;</span><br><span class="line">				<span class="keyword">if</span> m != <span class="literal">nil</span> &#123;</span><br><span class="line">					*(*unsafe.Pointer)(add(unsafe.Pointer(m), unsafe.Sizeof(itab&#123;&#125;)+<span class="keyword">uintptr</span>(k)*ptrSize)) = t.ifn</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">goto</span> nextimethod</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// didn&#x27;t find method</span></span><br><span class="line">		<span class="keyword">if</span> !canfail &#123;</span><br><span class="line">			<span class="keyword">if</span> locked != <span class="number">0</span> &#123;</span><br><span class="line">				unlock(&amp;ifaceLock)</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">panic</span>(&amp;TypeAssertionError&#123;<span class="string">&quot;&quot;</span>, *typ._string, *inter.typ._string, *iname&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">		m.bad = <span class="number">1</span></span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	nextimethod:</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> locked == <span class="number">0</span> &#123;</span><br><span class="line">		gothrow(<span class="string">&quot;invalid itab locking&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	m.link = hash[h]</span><br><span class="line">	atomicstorep(unsafe.Pointer(&amp;hash[h]), unsafe.Pointer(m))</span><br><span class="line">	unlock(&amp;ifaceLock)</span><br><span class="line">	<span class="keyword">if</span> m.bad != <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> m</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再看下最后的AS节点：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.   <span class="selector-tag">AS</span> <span class="selector-tag">u</span>(<span class="number">100</span>) <span class="selector-tag">l</span>(<span class="number">18</span>) <span class="selector-tag">tc</span>(<span class="number">1</span>)</span><br><span class="line">.   .   <span class="selector-tag">NAME-main</span><span class="selector-class">.i</span> <span class="selector-tag">u</span>(<span class="number">1</span>) <span class="selector-tag">a</span>(<span class="number">1</span>) <span class="selector-tag">g</span>(<span class="number">2</span>) <span class="selector-tag">l</span>(<span class="number">18</span>) <span class="selector-tag">x</span>(<span class="number">0</span>+<span class="number">0</span>) <span class="selector-tag">class</span>(PAUTO) <span class="selector-tag">f</span>(<span class="number">1</span>) <span class="selector-tag">ld</span>(<span class="number">1</span>) <span class="selector-tag">tc</span>(<span class="number">1</span>) <span class="selector-tag">used</span>(<span class="number">1</span>) <span class="selector-tag">main</span><span class="selector-class">.I</span></span><br><span class="line">.   .   <span class="selector-tag">EFACE</span> <span class="selector-tag">u</span>(<span class="number">2</span>) <span class="selector-tag">l</span>(<span class="number">18</span>) <span class="selector-tag">tc</span>(<span class="number">1</span>) <span class="selector-tag">main</span><span class="selector-class">.I</span></span><br><span class="line">.   .   .   <span class="selector-tag">NAME-main</span><span class="selector-class">.autotmp_0003</span> <span class="selector-tag">u</span>(<span class="number">1</span>) <span class="selector-tag">a</span>(<span class="number">1</span>) <span class="selector-tag">l</span>(<span class="number">18</span>) <span class="selector-tag">x</span>(<span class="number">0</span>+<span class="number">0</span>) <span class="selector-tag">class</span>(PAUTO) <span class="selector-tag">esc</span>(N) <span class="selector-tag">tc</span>(<span class="number">1</span>) <span class="selector-tag">used</span>(<span class="number">1</span>) <span class="selector-tag">PTR64-</span>*<span class="selector-tag">uint8</span></span><br><span class="line">.   .   .   <span class="selector-tag">NAME-main</span><span class="selector-class">.autotmp_0000</span> <span class="selector-tag">u</span>(<span class="number">1</span>) <span class="selector-tag">a</span>(<span class="number">1</span>) <span class="selector-tag">l</span>(<span class="number">18</span>) <span class="selector-tag">x</span>(<span class="number">0</span>+<span class="number">0</span>) <span class="selector-tag">class</span>(PAUTO) <span class="selector-tag">esc</span>(N) <span class="selector-tag">tc</span>(<span class="number">1</span>) <span class="selector-tag">used</span>(<span class="number">1</span>) <span class="selector-tag">PTR64-</span>*<span class="selector-tag">main</span><span class="selector-class">.T</span></span><br></pre></td></tr></table></figure>
<p>这里将<code>EFACE</code>节点赋给<code>main.i</code>变量，<code>EFACE</code>里面包含了一个指向<code>autotmp_0003</code>变量(<code>autotmp_0003</code>就是上面生成itab的那个变量) 和一个指针变量<code>autotmp_0000</code>(这个其实就是<code>*main.T</code>)<br>因此<code>main.i</code>里面其实就包含了两部分</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> iface <span class="keyword">struct</span> &#123;</span><br><span class="line">    tab *itab</span><br><span class="line">    data unsafe.Pointer</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="0x02-总结"><a href="#0x02-总结" class="headerlink" title="0x02 总结"></a>0x02 总结</h4><p>&emsp;当通过接口调用方法的时候大体过程如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t *T</span><br><span class="line"><span class="keyword">var</span> i *I</span><br><span class="line"><span class="keyword">var</span> tmp *T</span><br><span class="line">tmp = t</span><br><span class="line">i = <span class="keyword">interface</span>&#123;</span><br><span class="line">    tab: getitab()</span><br><span class="line">    data: tmp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上面伪代码可以看出</p>
<ol>
<li>interface自己本身就是一个变量</li>
<li>interface有两部分，第一部分是一个itab映射表，一个是指向具体对象的指针</li>
</ol>
<h4 id="0x03-参考"><a href="#0x03-参考" class="headerlink" title="0x03 参考"></a>0x03 参考</h4><ol>
<li>《go语言核心编程》</li>
<li><img src="https://zhuanlan.zhihu.com/p/225448359" alt="golang AST简介"></li>
<li><img src="https://www.altoros.com/blog/golang-internals-part-2-diving-into-the-go-compiler/" alt="drive into compiler"></li>
</ol>
</div><div class="tags"><a href="/tags/go/"><i class="fa fa-tag"></i>go</a></div><div class="post-nav"><a class="pre" href="/2021/03/28/go-bootstrap/">go启动流程分析</a><a class="next" href="/2021/03/22/program-k8s-1-introduce/">k8s编程-介绍</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://3xpl0it3r.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/go/" style="font-size: 15px;">go</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size: 15px;">面试题</a> <a href="/tags/k8s/" style="font-size: 15px;">k8s</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/03/28/go-bootstrap/">go启动流程分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/27/go-interface/">go-interface</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/22/program-k8s-1-introduce/">k8s编程-介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/15/golang-escape/">golang 逃逸机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/12/interview/">interview</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/01/hello-world/">hello-world</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">l0calh0st.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>